{#
name: datasystem_users_dump.ldt.j2
description: template to turn data on users of the LifeWatch datasystem into triples 
input: data/*_info_added.csv
#}
{%- include 'includes/prefixes.ttl' %}

@base <http://lifewatch-user-analysis-2023> . #to decide baseref for this use-case project

{%- for _ in sets['_']%}
</user/{{_.user_identifier}}>
    a schema:Person ; 

    {%- if _.MarineInfo_ID or _.ROR_ID or _.local_ID %}
    {%- if _.MarineInfo_ID != '-' %}
    schema:affiliation <{{ _.MarineInfo_ID | safe }}> ;
    {%- elif _.ROR_ID != '-' %}
    schema:affiliation <{{_.ROR_ID | safe }}> ;
    {%- else %}
    schema:affiliation </affiliation/{{ _.local_ID | safe }}> ;
    {%- endif %} 
    {%- endif %}
.
{%- endfor %}